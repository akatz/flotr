<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test plot</title>
    <link href="./lib/layout.css" rel="stylesheet" type="text/css">
    <!--[if IE]><script type="text/javascript" src="./lib/excanvas.pack.js"></script><![endif]-->
    <script type="text/javascript" src="./lib/jquery.min.js"></script>
    <script type="text/javascript" src="./lib/jquery.flot.js"></script>
    <script type="text/javascript">
      $(document).ready( function() {
        // setup plot
        function getData( x1, x2 ) {
          var d = [];
          for( var i = x1; i < x2; i += ( x2 - x1 ) / 100 ) {
            d.push( [ i, Math.sin( i * Math.sin( i ) ) ] );
          }
          return [ { label: 'sin(x sin(x))', data: d } ];
        }

        var options = {
          legend:    { show: false },
          xaxis:     {label: "X",},
          yaxis:     {label: "",},
          points: { show: true }, 
          lines:  { show: true },
          selection: { mode: 'xy' },
          hints: {
            show: true,
            hintFormatter: function( datapoint ) {
              hintStr = "";
              for( var key in datapoint ) {
                if( key[0] == '_' ) { continue; } // skip internal members
                hintStr += "<strong>" + key + ":</strong> " +
                           datapoint[key].toFixed(2) + "<br/>";
              }
              return hintStr;
            } },
          grid: {
            clickable: true,
            hoverable: true,
            hoverFill: '#444',
            hoverRadius: 5
          }
        };

        // var startData = getData( 0, 3 * Math.PI );
        var startData = [ { color: "red", label: "Sin(x)", data: [[0, 0.0], [1, 0.0314107590781283], [2, 0.0627905195293134], [3, 0.0941083133185143], [4, 0.125333233564304], [5, 0.156434465040231], [6, 0.187381314585725], [7, 0.218143241396543], [8, 0.248689887164855], [9, 0.278991106039229], [10, 0.309016994374947], [11, 0.338737920245291], [12, 0.368124552684678], [13, 0.397147890634781], [14, 0.425779291565073], [15, 0.453990499739547], [16, 0.481753674101715], [17, 0.509041415750371], [18, 0.535826794978997], [19, 0.562083377852131], [20, 0.587785252292473], [21, 0.612907053652976], [22, 0.63742398974869], [23, 0.661311865323652], [24, 0.684547105928689], [25, 0.707106781186548], [26, 0.728968627421412], [27, 0.75011106963046], [28, 0.770513242775789], [29, 0.79015501237569], [30, 0.809016994374947], [31, 0.827080574274562], [32, 0.844327925502015], [33, 0.860742027003944], [34, 0.876306680043864], [35, 0.891006524188368], [36, 0.90482705246602], [37, 0.917754625683981], [38, 0.929776485888251], [39, 0.940880768954226], [40, 0.951056516295154], [41, 0.960293685676943], [42, 0.968583161128631], [43, 0.975916761938747], [44, 0.982287250728689], [45, 0.987688340595138], [46, 0.992114701314478], [47, 0.99556196460308], [48, 0.998026728428272], [49, 0.999506560365732], [50, 1.0], [51, 0.999506560365732], [52, 0.998026728428272], [53, 0.99556196460308], [54, 0.992114701314478], [55, 0.987688340595138], [56, 0.982287250728689], [57, 0.975916761938747], [58, 0.968583161128631], [59, 0.960293685676943], [60, 0.951056516295154], [61, 0.940880768954225], [62, 0.929776485888251], [63, 0.917754625683981], [64, 0.904827052466019], [65, 0.891006524188368], [66, 0.876306680043863], [67, 0.860742027003944], [68, 0.844327925502015], [69, 0.827080574274562], [70, 0.809016994374947], [71, 0.79015501237569], [72, 0.770513242775789], [73, 0.750111069630459], [74, 0.728968627421412], [75, 0.707106781186548], [76, 0.684547105928689], [77, 0.661311865323652], [78, 0.63742398974869], [79, 0.612907053652976], [80, 0.587785252292473], [81, 0.56208337785213], [82, 0.535826794978997], [83, 0.509041415750371], [84, 0.481753674101715], [85, 0.453990499739546], [86, 0.425779291565072], [87, 0.397147890634781], [88, 0.368124552684678], [89, 0.338737920245291], [90, 0.309016994374947], [91, 0.278991106039229], [92, 0.248689887164855], [93, 0.218143241396542], [94, 0.187381314585725], [95, 0.156434465040231], [96, 0.125333233564304], [97, 0.0941083133185144], [98, 0.0627905195293131], [99, 0.0314107590781282]]}, { color: "blue", label: "Cos(x)", data: [[0, 1.0], [1, 0.999506560365732], [2, 0.998026728428272], [3, 0.99556196460308], [4, 0.992114701314478], [5, 0.987688340595138], [6, 0.982287250728689], [7, 0.975916761938747], [8, 0.968583161128631], [9, 0.960293685676943], [10, 0.951056516295154], [11, 0.940880768954225], [12, 0.929776485888251], [13, 0.917754625683981], [14, 0.904827052466019], [15, 0.891006524188368], [16, 0.876306680043864], [17, 0.860742027003944], [18, 0.844327925502015], [19, 0.827080574274562], [20, 0.809016994374947], [21, 0.79015501237569], [22, 0.770513242775789], [23, 0.75011106963046], [24, 0.728968627421412], [25, 0.707106781186547], [26, 0.684547105928689], [27, 0.661311865323652], [28, 0.63742398974869], [29, 0.612907053652976], [30, 0.587785252292473], [31, 0.562083377852131], [32, 0.535826794978997], [33, 0.509041415750371], [34, 0.481753674101715], [35, 0.453990499739547], [36, 0.425779291565073], [37, 0.397147890634781], [38, 0.368124552684678], [39, 0.338737920245291], [40, 0.309016994374947], [41, 0.278991106039229], [42, 0.248689887164855], [43, 0.218143241396542], [44, 0.187381314585725], [45, 0.156434465040231], [46, 0.125333233564304], [47, 0.0941083133185143], [48, 0.0627905195293133], [49, 0.0314107590781282], [50, -1.60812264967664e-16], [51, -0.0314107590781283], [52, -0.0627905195293134], [53, -0.0941083133185144], [54, -0.125333233564304], [55, -0.156434465040231], [56, -0.187381314585725], [57, -0.218143241396543], [58, -0.248689887164855], [59, -0.278991106039229], [60, -0.309016994374948], [61, -0.338737920245292], [62, -0.368124552684678], [63, -0.397147890634781], [64, -0.425779291565073], [65, -0.453990499739547], [66, -0.481753674101715], [67, -0.509041415750371], [68, -0.535826794978997], [69, -0.562083377852131], [70, -0.587785252292473], [71, -0.612907053652977], [72, -0.63742398974869], [73, -0.661311865323652], [74, -0.684547105928689], [75, -0.707106781186547], [76, -0.728968627421412], [77, -0.75011106963046], [78, -0.770513242775789], [79, -0.79015501237569], [80, -0.809016994374947], [81, -0.827080574274562], [82, -0.844327925502015], [83, -0.860742027003944], [84, -0.876306680043864], [85, -0.891006524188368], [86, -0.90482705246602], [87, -0.917754625683981], [88, -0.929776485888251], [89, -0.940880768954225], [90, -0.951056516295154], [91, -0.960293685676943], [92, -0.968583161128631], [93, -0.975916761938747], [94, -0.982287250728689], [95, -0.987688340595138], [96, -0.992114701314478], [97, -0.99556196460308], [98, -0.998026728428272], [99, -0.999506560365732]]} ]
        var plot = $.plot( $('#placeholder'), startData, options );

        // setup overview
        var overview = $.plot( $('#overview'), startData, {
          legend:     { show: true, container: $('#overviewLegend') },
          lines:      { show: true, lineWidth: 1 },
          shadowSize: 0,
          xaxis:      { ticks: 4, min: null, max: null},
          yaxis:      { ticks: 3, min: -1.5, max:   1.5},
          grid:       { color: "#999" },
          selection:  { mode: 'xy' }
        } );

        // now connect the two
        var internalSelection = false;

        $('#placeholder').bind( 'plotselected', function( event, area ) {
          // clamp the zooming to prevent eternal zoom
          if( area.x2 - area.x1 < 0.00001 ) area.x2 = area.x1 + 0.00001;
          if( area.y2 - area.y1 < 0.00001 ) area.y2 = area.y1 + 0.00001;

          // do the zooming
          plot = $.plot( $('#placeholder'), startData,
                         $.extend( true, {}, options, {
                           xaxis: { min: area.x1, max: area.x2 },
                           yaxis: { min: area.y1, max: area.y2 }
                         } ) );

          if( internalSelection ) return;
          internalSelection = true;
          overview.setSelection( area );
          internalSelection = false;
        } );

        $('#overview').bind( 'plotselected', function( event, area ) {
          if( internalSelection ) return;
          internalSelection = true;
          plot.setSelection( area );
          internalSelection = false;
        } );
        // setup event handlers
        $("#placeholder").bind( 'plotclick', function( e, pos ) {
          if( !pos.selected ) { return; }
          plot.highlight( pos.selected );
          x = pos.selected.x.toFixed( 2 );
          y = pos.selected.y.toFixed( 2 );
          $("#result").text( 'You clicked on (' + x +  ', ' + y + ')' );
        } );

        $("#placeholder").bind( 'plotmousemove', function( e, pos ) {
          if( !pos.selected ) { return; }
          plot.highlight( pos.selected );
        } );
      } );
    </script>
  </head>
  <body>
    <h1>Test plot</h1>

      <div id="placeholder" style="float:left;width: 640px; height: 480px;"></div>

    <div id="miniature" style="float:left;margin-left:20px;margin-top:0px">
      <div id="overview" style="width:166px;height:100px"></div>
      <p id="overviewLegend" style="margin-left:10px"></p>
      <p><span id="result"></span></p>
    </div>

    <p style="clear:left">This is a test plot made with Flotr
    </p>
  </body>
</html>
